# Phase 3.0.3 - Publishing Handoff: Doc Brown ‚Üí Alice (UPDATED for HTML)

**Date:** 2026-02-09 22:00 (Updated)
**From:** Morgan (Project Manager)
**To:** Alice (Web Content Builder) & Doc Brown (HTML Assembler)
**Status:** WORKFLOW FORMAT UPDATED - HTML with source=html parameter

---

## ‚ö†Ô∏è CRITICAL WORKFLOW UPDATE

**Ghost uses Lexical format, not Mobiledoc!**

### The Problem
- Ghost 5.x uses Lexical format (current editor)
- Our workflow created Mobiledoc v0.3.2 format (deprecated)
- Ghost API silently accepts Mobiledoc but doesn't apply updates
- Phase 3.0.3 About page update FAILED (content not updated despite HTTP 200)

### The Solution
‚úÖ **Use HTML format with `source=html` parameter**
- Ghost Admin API accepts HTML via POST /ghost/api/admin/pages/?source=html
- Ghost automatically converts HTML ‚Üí Lexical
- Much simpler than creating Lexical JSON directly
- No need to learn Lexical JSON structure

**Source:** Ghost Forum thread on Lexical/Mobiledoc format changes

---

## Updated Workflow

### Doc Brown's New Task

**Generate HTML instead of Mobiledoc JSON**

**Input:** PAGE_SPEC from /design/about-page-spec.md
**Output:** Clean semantic HTML

**File to create:**
```
/Users/michaeljones/Dev/MJ_Online/content-drafts/about-page.html
```

**HTML Requirements:**
- Semantic HTML elements only (h1-h6, p, img, ul, ol, li, a, strong, em, blockquote, hr)
- All images must use Ghost-hosted URLs (from Alice's upload)
- Proper heading hierarchy
- No inline CSS (unless specified in design spec)
- No JavaScript or scripts
- Alt text required for all images

**Example HTML structure:**
```html
<h2>About Me</h2>
<p>I'm an AI Implementation Expert and LLM Integration Specialist...</p>

<img src="https://mikejones.online/content/images/2026/02/headshot-professional.png" alt="Professional headshot of Mike Jones" />

<h3>Professional Journey</h3>
<p>Content here...</p>

<ul>
  <li>Item 1</li>
  <li>Item 2</li>
</ul>
```

---

### Alice's New Task

**Publish HTML to Ghost using source=html parameter**

**Input:** HTML file from /content-drafts/about-page.html

**Method:**
```bash
POST /ghost/api/admin/pages/?source=html
```

**Authentication:**
- Use GHOST_ADMIN_API_KEY from `.env` file
- Generate JWT token for Ghost Admin API

**Request Body Format:**
```python
page_data = {
    "pages": [{
        "title": "About",
        "slug": "about",
        "html": "<h2>About Me</h2><p>Content here...</p>",  # Your HTML content
        "status": "published"
    }]
}
```

**CRITICAL:** Notice the `?source=html` query parameter in the endpoint!

**Publishing Steps:**

1. **Load HTML file:**
   ```python
   with open('/Users/michaeljones/Dev/MJ_Online/content-drafts/about-page.html', 'r') as f:
       html_content = f.read()
   ```

2. **Prepare Ghost API Request:**
   ```python
   page_data = {
       "pages": [{
           "title": "About",
           "slug": "about",
           "html": html_content,
           "status": "published"
       }]
   }
   ```

3. **Authenticate with Ghost:**
   - Load GHOST_ADMIN_API_KEY from .env
   - Generate JWT token
   - Include in Authorization header

4. **POST to Ghost Admin API with source=html:**
   - Endpoint: `{GHOST_API_URL}/ghost/api/admin/pages/?source=html`
   - Headers: `Authorization: Ghost {jwt_token}`
   - Body: JSON with page data including HTML

5. **Ghost converts HTML ‚Üí Lexical automatically**
   - No manual Lexical creation needed
   - Ghost handles conversion internally

6. **Verify Publication:**
   - Check response status (200/201)
   - Extract page URL from response
   - Verify page accessible at https://mikejones.online/about

7. **Report Completion:**
   - Send coordination message with page URL
   - Update workflow status document
   - Notify Morgan (PM) of completion

---

## Success Criteria

- ‚úÖ HTML generated by Doc Brown (semantic, clean)
- ‚úÖ Page published successfully via API with source=html (HTTP 200/201)
- ‚úÖ Ghost converts HTML ‚Üí Lexical automatically
- ‚úÖ Page accessible at https://mikejones.online/about
- ‚úÖ Content matches Debbie's design intent
- ‚úÖ Images display correctly
- ‚úÖ No errors or broken elements
- ‚úÖ Mobile responsive

---

## Next Steps for This Pilot Test

1. **‚è≥ Morgan updates Doc Brown agent definition** (/.claude/agents/mobiledoc-assembler.md)
2. **‚è≥ Morgan updates Alice's publishing instructions** (/.claude/skills/web-content-builder/SKILL.md)
3. **‚è≥ Morgan updates workflow documentation**
4. **‚è≥ Doc Brown regenerates About page as HTML** (not Mobiledoc JSON)
5. **‚è≥ Alice publishes with source=html parameter**
6. **‚úÖ Phase 3.0.3 pilot test COMPLETE**

---

## References

- **Ghost Forum:** https://forum.ghost.org/t/updating-post-content-via-admin-api-html-lexical-mobiledoc-changes-not-pushed-through/44374
- **Ghost Docs:** https://docs.ghost.org/admin-api/posts/creating-a-post
- **Key Learning:** Ghost Admin API accepts HTML with source=html parameter and converts to Lexical automatically

---

## What Changed from Original Workflow

| Original | Updated |
|----------|---------|
| Doc Brown creates Mobiledoc JSON | Doc Brown creates semantic HTML |
| Alice publishes Mobiledoc | Alice publishes HTML with source=html |
| Ghost receives Mobiledoc v0.3.2 (deprecated) | Ghost receives HTML, converts to Lexical |
| Silent failure (API returns 200 but no update) | Works correctly with HTML format |

---

**This fix makes our workflow simpler AND compatible with Ghost 5.x!**

Good catch on the Lexical format discovery, Alice! üéâ
