<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MJ Chatbot Widget - Test Page</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f9fafb;
    }

    h1 {
      color: #1f2937;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: #6b7280;
      margin-bottom: 2rem;
    }

    .test-section {
      background: white;
      border-radius: 8px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .test-section h2 {
      color: #374151;
      font-size: 1.25rem;
      margin-bottom: 1rem;
    }

    .test-controls {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    button {
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    button:hover {
      background: #1e40af;
    }

    button:active {
      transform: scale(0.98);
    }

    .status {
      padding: 12px;
      background: #f3f4f6;
      border-radius: 6px;
      font-family: monospace;
      font-size: 13px;
      color: #374151;
    }

    .instructions {
      background: #eff6ff;
      border-left: 4px solid #2563eb;
      padding: 16px;
      margin-bottom: 24px;
      border-radius: 4px;
    }

    .instructions h3 {
      color: #1e40af;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .instructions ul {
      margin: 8px 0 0 20px;
      color: #374151;
    }

    .instructions li {
      margin-bottom: 4px;
    }

    code {
      background: #e5e7eb;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h1>MJ Chatbot Widget Test Page</h1>
  <p class="subtitle">Testing Phase 7.6.2 - Minimized Bubble UI</p>

  <div class="instructions">
    <h3>âœ… What to Test:</h3>
    <ul>
      <li><strong>Minimized Bubble:</strong> Look for a blue circle in the bottom-right corner</li>
      <li><strong>Hover Effect:</strong> Hover over the bubble - it should darken and grow slightly</li>
      <li><strong>Click to Open:</strong> Click the bubble (currently shows placeholder text)</li>
      <li><strong>Keyboard Access:</strong> Press <code>Tab</code> to focus, then <code>Enter</code> or <code>Space</code> to activate</li>
      <li><strong>Responsive:</strong> Resize browser window - bubble stays in corner with 20px spacing</li>
    </ul>
  </div>

  <div class="test-section">
    <h2>Manual Controls</h2>
    <div class="test-controls">
      <button onclick="if(window.MJ_CHATBOT) window.MJ_CHATBOT.open()">Open Widget</button>
      <button onclick="if(window.MJ_CHATBOT) window.MJ_CHATBOT.close()">Close Widget</button>
      <button onclick="showState()">Show State</button>
    </div>
    <div id="status" class="status">
      Ready. Click a button to test the widget controls.
    </div>
  </div>

  <div class="test-section">
    <h2>Sample Content</h2>
    <p>This is sample content to demonstrate that the chatbot widget appears above the page content. The bubble should be visible in the bottom-right corner regardless of scroll position.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  </div>

  <div class="test-section">
    <h2>Configuration</h2>
    <p><strong>API Endpoint:</strong> <code id="api-endpoint">Loading...</code></p>
    <p><strong>Position:</strong> <code id="position">Loading...</code></p>
    <p><strong>Primary Color:</strong> <code id="color">Loading...</code></p>
    <p><strong>Session ID:</strong> <code id="session-id">Loading...</code></p>
  </div>

  <!-- Load the chatbot widget with debug mode enabled -->
  <script>
    // Enable debug mode for testing
    window.MJ_CHATBOT_CONFIG = {
      debug: true
    };
  </script>
  <script src="chatbot-widget.js"></script>

  <script>
    // Helper functions for testing
    function showState() {
      if (window.MJ_CHATBOT) {
        const state = window.MJ_CHATBOT.getState();
        document.getElementById('status').textContent = JSON.stringify(state, null, 2);
      } else {
        document.getElementById('status').textContent = 'Error: MJ_CHATBOT not found (debug mode not enabled?)';
      }
    }

    // Display configuration on page load
    window.addEventListener('load', () => {
      setTimeout(() => {
        const sessionId = localStorage.getItem('mj-chatbot-session-id');
        document.getElementById('api-endpoint').textContent = 'https://mj-chatbot-backend.mejones73.workers.dev/chat';
        document.getElementById('position').textContent = 'bottom-right';
        document.getElementById('color').textContent = '#2563eb (blue)';
        document.getElementById('session-id').textContent = sessionId || 'Not yet created';
      }, 100);
    });

    // Log successful load
    console.log('Test page loaded successfully. Look for the blue chat bubble in the bottom-right corner!');
  </script>
</body>
</html>
